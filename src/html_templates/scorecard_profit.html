<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="html_templates/templates.css">
<script type"text/javascript" src="html_templates/utils.js"></script>
</head>
<body>

<table class="scorecard" align="center">
  <tr>
    <td>Total Sells:</td>
    <td id = "$panel.id$.count" />
  <tr>
    <td>Average Profit: </td>
    <td id = "$panel.id$.average" />
  </tr>
</table>


<p>--------------</p>

<table id = "$panel.id$.profitStats" class="stats" align="center">
  <caption>Average Profit by Level</caption>
  <tr>
    <th>Level</th>
    <th>Total Sells</th>
    <th>Profit</th>
  </tr>

<script>

var profitAvg  = $var-profitAvg$;
var sellAvg    = $var-sellValueAvg$;
var sellCount  = $var-sellCount$;

document.getElementById("$panel.id$.average").innerHTML = profitAvg.toFixed(1) + ' (' + ((profitAvg / sellAvg) * 100).toFixed(1) + '%)';
document.getElementById("$panel.id$.count").innerHTML   = sellCount;

var levels           = $var-levels$;
var profitByLevel    = $var-profitByLevel$;
var sellAvgByLevel   = $var-sellAvgByLevel$;
var sellCountByLevel = $var-sellCountByLevel$;

var table           = document.getElementById("$panel.id$.profitStats");

for (var i=0; i < profitByLevel.length; i++){

    var level = levels[i];
    var row   = table.insertRow(i + 1);
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
    cell1.innerHTML = level;
    cell2.innerHTML = sellCountByLevel[i];
    cell3.innerHTML = profitByLevel[i].toFixed(1) + ' (' + ((profitByLevel[i] / sellAvgByLevel[i]) * 100).toFixed(1) + '%)';
}

</script>

</body>
</html>
